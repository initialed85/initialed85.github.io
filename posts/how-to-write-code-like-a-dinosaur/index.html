<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to write code like a Dinosaur | initialed85's misc tech stuff</title><meta name=keywords content><meta name=description content="I&rsquo;ve been working on a personal project called Dinosaur; it&rsquo;s a single-page application that presents the user with two horizontal panes- a code editor in the language of your choice and a live feed to your code being executed.
Languages presently supported are:
C Go Java Lua Python Rust TypeScript Initially this sounds a bit like any of the various coding games / exercises out there but I&rsquo;ve chosen to add what I think is a slight variation in that all user sessions have network stack access to the same network as all other user sessions (in time I&rsquo;ll probably permit this to be broken up into groups, permitting isolated group sessions)."><meta name=author content="Edward Beech"><link rel=canonical href=https://initialed85.cc/posts/how-to-write-code-like-a-dinosaur/><link crossorigin=anonymous href=/assets/css/stylesheet.bc1149f4a72aa4858d3a9f71462f75e5884ffe8073ea9d6d5761d5663d651e20.css integrity="sha256-vBFJ9KcqpIWNOp9xRi915YhP/oBz6p1tV2HVZj1lHiA=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://initialed85.cc/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://initialed85.cc/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://initialed85.cc/favicon-32x32.png><link rel=apple-touch-icon href=https://initialed85.cc/apple-touch-icon.png><link rel=mask-icon href=https://initialed85.cc/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="How to write code like a Dinosaur"><meta property="og:description" content="I&rsquo;ve been working on a personal project called Dinosaur; it&rsquo;s a single-page application that presents the user with two horizontal panes- a code editor in the language of your choice and a live feed to your code being executed.
Languages presently supported are:
C Go Java Lua Python Rust TypeScript Initially this sounds a bit like any of the various coding games / exercises out there but I&rsquo;ve chosen to add what I think is a slight variation in that all user sessions have network stack access to the same network as all other user sessions (in time I&rsquo;ll probably permit this to be broken up into groups, permitting isolated group sessions)."><meta property="og:type" content="article"><meta property="og:url" content="https://initialed85.cc/posts/how-to-write-code-like-a-dinosaur/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-18T12:43:02+08:00"><meta property="article:modified_time" content="2022-09-18T12:43:02+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to write code like a Dinosaur"><meta name=twitter:description content="I&rsquo;ve been working on a personal project called Dinosaur; it&rsquo;s a single-page application that presents the user with two horizontal panes- a code editor in the language of your choice and a live feed to your code being executed.
Languages presently supported are:
C Go Java Lua Python Rust TypeScript Initially this sounds a bit like any of the various coding games / exercises out there but I&rsquo;ve chosen to add what I think is a slight variation in that all user sessions have network stack access to the same network as all other user sessions (in time I&rsquo;ll probably permit this to be broken up into groups, permitting isolated group sessions)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://initialed85.cc/posts/"},{"@type":"ListItem","position":2,"name":"How to write code like a Dinosaur","item":"https://initialed85.cc/posts/how-to-write-code-like-a-dinosaur/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to write code like a Dinosaur","name":"How to write code like a Dinosaur","description":"I\u0026rsquo;ve been working on a personal project called Dinosaur; it\u0026rsquo;s a single-page application that presents the user with two horizontal panes- a code editor in the language of your choice and a live feed to your code being executed.\nLanguages presently supported are:\nC Go Java Lua Python Rust TypeScript Initially this sounds a bit like any of the various coding games / exercises out there but I\u0026rsquo;ve chosen to add what I think is a slight variation in that all user sessions have network stack access to the same network as all other user sessions (in time I\u0026rsquo;ll probably permit this to be broken up into groups, permitting isolated group sessions).","keywords":[],"articleBody":"I’ve been working on a personal project called Dinosaur; it’s a single-page application that presents the user with two horizontal panes- a code editor in the language of your choice and a live feed to your code being executed.\nLanguages presently supported are:\nC Go Java Lua Python Rust TypeScript Initially this sounds a bit like any of the various coding games / exercises out there but I’ve chosen to add what I think is a slight variation in that all user sessions have network stack access to the same network as all other user sessions (in time I’ll probably permit this to be broken up into groups, permitting isolated group sessions).\nYou can access a running instance of it at dinosaur.initialed85.cc; have a play, see if you can break it, feel free to exploit any glaring security holes I’ve missed.\nIt may sound kinda cool, but as you’ll find out if you read on it’s mostly just an exercise of plumbing together excellent software that other folks have already built.\nRationale The idea for this came about as part of an ongoing friendly argument at work that sees our team of developers divided into two camps:\nThe new, sharp developers that are masters of the clever features built into their IDEs The old, decaying “dinosaur” developers that are scared by clever features and use their IDEs more like an editor Those of us in the new camp may often steer clear of things like the shell, favouring instead a rich UI as we churn out solutions at a high velocity while those of us in the old camp waste time reading and understanding code and spend far too long typing long-winded Bash commands to achieve what the UI can do in mere seconds.\nAs with a lot of these arguments, neither party is absolutely correct, each simply gravitates towards one end of the spectrum as a preference because it most gels with the way they work.\nProbably if we were to be objective and pragmatic, a good developer would have a functional degree of mastery over both approaches thus maximising the tools available to them.\nI’ll leave the reader to speculate as to where on the spectrum I would place myself!\nArchitecture The system looks something like this as an overview:\nAnd if we make the interesting parts a bit more transparent:\nHere’s a quick summary of the different technologies in there:\nNginx Web server / reverse proxy Selected because it works well and I already know how to use it Used to host the static content (TypeScript / React) and proxy the backend service Go Language for compiling native executables Selected because it has good built-ins for HTTP backend services and a great concurrent performance Used as the language to write the backend service Docker Orchestration system for Linux containers Selected because it works well and I already know how to use it Used both functionally to provide isolation for a user session and non-functionally as a deployment mechanism GoTTY Batteries-included utility for exposing a shell command via HTTP Selected because it made an otherwise detailed problem extremely easy Used to provide the live “build and run” feed for a user session entr Executes a given command on changes to a watched filesystem path Selected because it made an otherwise detailed problem extremely easy Used to manage the “filesystem change-driven build and run” loop for a user session Lowering risk of exploitation Given I haven’t (as yet) hidden this thing behind any sort of social sign-in and have no other smarts to limit access, I wanted to try and reduce the amount the system could be exploited (e.g. as part of a botnet or who knows what).\nDocker makes this easy for me thanks to its usage of Linux namespaces and various other bits of sugar; here’s what I’ve done:\nEach user session is in its own Docker container Each user session Docker container has CPU and RAM resource constraints applied All user session Docker containers are in an internal Docker network with no internet access I’ve not done a great deal of testing (this is a personal project and tests are too much like work!) but I’m hoping that this will help if somebody tries to cripple the system with some really CPU or RAM hungry code.\nApproach for supported languages I struggle with motivation for all of my personal projects because they often don’t really serve any useful purpose; this is well evidenced by my piecemeal home-automation-centric projects:\ncameranator Home-grown CCTV motion detection and segment recording system mqtt_things Some hacking to expose a few things via MQTT zmote A Python library for somebody else’s low-volume-produced WiFi IR blaster They all kinda work, they’re all kinda used and none of them are reliable or complete or well tested.\nThis project has managed to keep me on the hook for a while because I get to play with a bunch of languages that I almost never used / had previously never used; this has come about because (at least for now) easy supported language comes with a minimal template that does the following:\nOpen a UDP socket Send a 1 Hz (ish) heartbeat as a broadcast announcing itself in the main thread Receive broadcast heartbeats from other user session using a background thread This sounds pretty minimal, but it’s touching a few key concepts for each language that take you beyond simple things like using variables and functions and printing output.\nC I’m not at all experienced with C although it was part of my training long ago; I’ve written nearly nothing using it personally (maybe some Arduino stuff here and there) and absolutely nothing using it professionally- C is OG, so it has to be a language that Dinosaur has support for.\nBecause I don’t know what I’m doing, my template may for sure have issues; for example no mutex on the socket interactions.\nGo I’m pretty comfortable with Go both personally and professionally, but my approach to polyglotism is quite naive and reflects my lack of detail in that I tend to write one language much like I write another with sort of a “lowest common denominator” approach (and as such I’m rarely maximising the full features of a language).\nFor example a serious Go coder would probably have channels in front of the socket.\nJava Java is like C for me; I’ve done very little of it personally and professionally, I was once taught it and deemed competent but I’ve forgotten basically all of that.\nInterestingly, it seems to be the heaviest when running the template code- could be a byproduct of my lack of understanding on the correct way to write Java.\nPractically it’s quite verbose and while not really apparent with the small bit of template code for this project, it seems like it can be quite an art to juggle JRE and various other dependencies.\nLua I added Lua because my Dad (a C coder from way back) constantly bangs on about it; we’ve had many light arguments about wherein I suggest Lua is garbage (based on a brochure review and no practical experience) and so I needed to get some real experience with it.\nAs far as I can tell:\nIntegrates well with C Has next to no standard library Has no built-in support for sockets (need external luasocket library) Has no built-in support for threads (just coroutines and you need to write your own dispatcher) The C-to-Lua interface (stack-based) needs care when achieving function interfaces because you just push values onto a stack (making it real easy to build an inconsistent returned interface for your varying code paths within a function); luasocket is an example of this causing bad interfaces Python I’m pretty comfortable with Python, it’s the language that I’ve done most of my professional coding with; however as with Go, the way I write it is probably not as Pythonic as a serious Python developer.\nRust I have written almost zero Rust and I would absolutely love to write more (I just don’t have an excuse, or didn’t, until now).\nIt looks like it has an incredibly steep learning curve but despite how low-level it is (it feels like it’s trying to solve the same problem as C) it can be impressively terse.\nThis is the language I will be trying to learn the most about in the near future.\nSimply getting the template code for this project to share a socket safely (at least as far as the borrow-checker is concerned) between the main thread and the background thread took me days; the takeaways ended up being this:\n// wrap a socket in an atomic reference counter; note the cool error handling let socket = sync::Arc::new(net::UdpSocket::bind(local_addr).expect(\"failed to bind socket\")); // take a clone of the socket for safely \"moving\" into the thread from an ownership let cloned_socket = socket.clone(); // spawn a thread and move the cloned socket into it thread::spawn( move | | receive_loop(cloned_socket, local_ip)); // meanwhile in our main thread we can comfortably do this (don't even need to unwrap the atomic reference counter) socket.send_to( format!(\"Hello world from Rust @ {}\", hostname).as_bytes(), format!(\"{}:{}\", broadcast_ip, PORT), ).expect(\"failed to send to socket\"); Apparently with this we can have faith that when everyone is finished using despite rust not having a garbage collector per se- exceptional!\nTypeScript We write a bit of TypeScript at work but it’s all on the frontend; NodeJS gets a pretty good review for server-side stuff so I figured I’d best include it.\nWithout question, it is super terse and that probably helps you get services up and running from nothing quite quickly.\nI don’t really like it- I had to hack more environment / dependency stuff in to get the TypeScript template working than I did for the other languages; maybe it’s okay if you’re comfortable with it, but it feels like there’s almost as much “fluff” around the edges of actually achieving anything as Java (environment-wise).\n","wordCount":"1664","inLanguage":"en","datePublished":"2022-09-18T12:43:02+08:00","dateModified":"2022-09-18T12:43:02+08:00","author":{"@type":"Person","name":"Edward Beech"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://initialed85.cc/posts/how-to-write-code-like-a-dinosaur/"},"publisher":{"@type":"Organization","name":"initialed85's misc tech stuff","logo":{"@type":"ImageObject","url":"https://initialed85.cc/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://initialed85.cc/ accesskey=h title="initialed85's misc tech stuff (Alt + H)">initialed85's misc tech stuff</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to write code like a Dinosaur</h1><div class=post-meta><span title='2022-09-18 12:43:02 +0800 +0800'>September 18, 2022</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Edward Beech</div></header><div class=post-content><p>I&rsquo;ve been working on a personal project called <a href=https://github.com/initialed85/dinosaur>Dinosaur</a>; it&rsquo;s a single-page application that
presents the user with two horizontal panes- a code editor in the language of your choice and a live feed to your code being executed.</p><p>Languages presently supported are:</p><ul><li>C</li><li>Go</li><li>Java</li><li>Lua</li><li>Python</li><li>Rust</li><li>TypeScript</li></ul><p>Initially this sounds a bit like any of the various coding games / exercises out there but I&rsquo;ve chosen to add what I think is a slight
variation in that all user sessions have network stack access to the same network as all other user sessions (in time I&rsquo;ll probably permit
this to be broken up into groups, permitting isolated group sessions).</p><p>You can access a running instance of it at <a href=https://dinosaur.initialed85.cc/>dinosaur.initialed85.cc</a>; have a play, see if you can break
it, feel free to exploit any glaring security holes I&rsquo;ve missed.</p><p>It may sound kinda cool, but as you&rsquo;ll find out if you read on it&rsquo;s mostly just an exercise of plumbing together excellent software that
other folks have already built.</p><h2 id=rationale>Rationale<a hidden class=anchor aria-hidden=true href=#rationale>#</a></h2><p>The idea for this came about as part of an ongoing friendly argument at work that sees our team of developers divided into two camps:</p><ul><li>The new, sharp developers that are masters of the clever features built into their IDEs</li><li>The old, decaying &ldquo;dinosaur&rdquo; developers that are scared by clever features and use their IDEs more like an editor</li></ul><p>Those of us in the new camp may often steer clear of things like the shell, favouring instead a rich UI as we churn out solutions at a high
velocity while those of us in the old camp waste time reading and understanding code and spend far too long typing
long-winded <a href=https://en.wikipedia.org/wiki/Bash_(Unix_shell)>Bash</a> commands to achieve what the UI can do in mere seconds.</p><p>As with a lot of these arguments, neither party is absolutely correct, each simply gravitates towards one end of the spectrum as a
preference because it most gels with the way they work.</p><p>Probably if we were to be objective and pragmatic, a good developer would have a functional degree of mastery over both approaches thus
maximising the tools available to them.</p><p>I&rsquo;ll leave the reader to speculate as to where on the spectrum I would place myself!</p><h2 id=architecture>Architecture<a hidden class=anchor aria-hidden=true href=#architecture>#</a></h2><p>The system looks something like this as an overview:</p><p><img loading=lazy src=/posts/how-to-write-code-like-a-dinosaur/image-1.png alt="Image 1"></p><p>And if we make the interesting parts a bit more transparent:</p><p><img loading=lazy src=/posts/how-to-write-code-like-a-dinosaur/image-2.png alt="Image 2"></p><p>Here&rsquo;s a quick summary of the different technologies in there:</p><ul><li><a href=https://www.nginx.com/>Nginx</a><ul><li>Web server / reverse proxy</li><li>Selected because it works well and I already know how to use it</li><li>Used to host the static content (TypeScript / React) and proxy the backend service</li></ul></li><li><a href=https://go.dev/>Go</a><ul><li>Language for compiling native executables</li><li>Selected because it has good built-ins for HTTP backend services and a great concurrent performance</li><li>Used as the language to write the backend service</li></ul></li><li><a href=https://www.docker.com/>Docker</a><ul><li>Orchestration system for Linux containers</li><li>Selected because it works well and I already know how to use it</li><li>Used both functionally to provide isolation for a user session and non-functionally as a deployment mechanism</li></ul></li><li><a href=https://github.com/sorenisanerd/gotty>GoTTY</a><ul><li>Batteries-included utility for exposing a shell command via HTTP</li><li>Selected because it made an otherwise detailed problem extremely easy</li><li>Used to provide the live &ldquo;build and run&rdquo; feed for a user session</li></ul></li><li><a href=https://github.com/eradman/entr>entr</a><ul><li>Executes a given command on changes to a watched filesystem path</li><li>Selected because it made an otherwise detailed problem extremely easy</li><li>Used to manage the &ldquo;filesystem change-driven build and run&rdquo; loop for a user session</li></ul></li></ul><h2 id=lowering-risk-of-exploitation>Lowering risk of exploitation<a hidden class=anchor aria-hidden=true href=#lowering-risk-of-exploitation>#</a></h2><p>Given I haven&rsquo;t (as yet) hidden this thing behind any sort of social sign-in and have no other smarts to limit access, I wanted to try and
reduce the amount the system could be exploited (e.g. as part of a botnet or who knows what).</p><p>Docker makes this easy for me thanks to its usage of <a href=https://en.wikipedia.org/wiki/Linux_namespaces>Linux namespaces</a> and various other
bits of sugar; here&rsquo;s what I&rsquo;ve done:</p><ul><li>Each user session is in its own Docker container</li><li>Each user session Docker container has <a href=https://docs.docker.com/config/containers/resource_constraints/#cpu>CPU</a>
and <a href=https://docs.docker.com/config/containers/resource_constraints/#memory>RAM</a> resource constraints applied</li><li>All user session Docker containers are in an internal Docker network with no internet access</li></ul><p>I&rsquo;ve not done a great deal of testing (this is a personal project and tests are too much like work!) but I&rsquo;m hoping that this will help if
somebody tries to cripple the system with some really CPU or RAM hungry code.</p><h2 id=approach-for-supported-languages>Approach for supported languages<a hidden class=anchor aria-hidden=true href=#approach-for-supported-languages>#</a></h2><p>I struggle with motivation for all of my personal projects because they often don&rsquo;t really serve any useful purpose; this is well evidenced
by my piecemeal home-automation-centric projects:</p><ul><li><a href=https://github.com/initialed85/cameranator>cameranator</a><ul><li>Home-grown CCTV motion detection and segment recording system</li></ul></li><li><a href=https://github.com/initialed85/mqtt_things>mqtt_things</a><ul><li>Some hacking to expose a few things via MQTT</li></ul></li><li><a href=https://github.com/initialed85/zmote>zmote</a><ul><li>A Python library for somebody else&rsquo;s low-volume-produced WiFi IR blaster</li></ul></li></ul><p>They all kinda work, they&rsquo;re all kinda used and none of them are reliable or complete or well tested.</p><p>This project has managed to keep me on the hook for a while because I get to play with a bunch of languages that I almost never used / had
previously never used; this has come about because (at least for now) easy supported language comes with a minimal template that does the
following:</p><ul><li>Open a UDP socket</li><li>Send a 1 Hz (ish) heartbeat as a broadcast announcing itself in the main thread</li><li>Receive broadcast heartbeats from other user session using a background thread</li></ul><p>This sounds pretty minimal, but it&rsquo;s touching a few key concepts for each language that take you beyond simple things like using variables
and functions and printing output.</p><h3 id=c>C<a hidden class=anchor aria-hidden=true href=#c>#</a></h3><p>I&rsquo;m not at all experienced with C although it was part of my training long ago; I&rsquo;ve written nearly nothing using it personally (maybe some
Arduino stuff here and there) and absolutely nothing using it professionally- C is OG, so it has to be a language that Dinosaur has support
for.</p><p>Because I don&rsquo;t know what I&rsquo;m doing, my template may for sure have issues; for example no mutex on the socket interactions.</p><h3 id=go>Go<a hidden class=anchor aria-hidden=true href=#go>#</a></h3><p>I&rsquo;m pretty comfortable with Go both personally and professionally, but my approach
to <a href=https://en.wikipedia.org/wiki/Polyglot_(computing)>polyglotism</a> is quite naive and reflects my lack of detail in that I tend to
write one language much like I write another with sort of a &ldquo;lowest common denominator&rdquo; approach (and as such I&rsquo;m rarely maximising the full
features of a language).</p><p>For example a serious Go coder would probably have channels in front of the socket.</p><h3 id=java>Java<a hidden class=anchor aria-hidden=true href=#java>#</a></h3><p>Java is like C for me; I&rsquo;ve done very little of it personally and professionally, I was once taught it and deemed competent but I&rsquo;ve
forgotten basically all of that.</p><p>Interestingly, it seems to be the heaviest when running the template code- could be a byproduct of my lack of understanding on the correct
way to write Java.</p><p>Practically it&rsquo;s quite verbose and while not really apparent with the small bit of template code for this project, it seems like it can be
quite an art to juggle JRE and various other dependencies.</p><h3 id=lua>Lua<a hidden class=anchor aria-hidden=true href=#lua>#</a></h3><p>I added Lua because my Dad (a C coder from way back) constantly bangs on about it; we&rsquo;ve had many light arguments about wherein I suggest
Lua is garbage (based on a brochure review and no practical experience) and so I needed to get some real experience with it.</p><p>As far as I can tell:</p><ul><li>Integrates well with C</li><li>Has next to no standard library</li><li>Has no built-in support for sockets (need external <code>luasocket</code> library)</li><li>Has no built-in support for threads (just coroutines and you need to write your own dispatcher)</li><li>The C-to-Lua interface (stack-based) needs care when achieving function interfaces because you just push values onto a stack (making
it real easy to build an inconsistent returned interface for your varying code paths within a function); <code>luasocket</code> is an example of this
causing bad interfaces</li></ul><h3 id=python>Python<a hidden class=anchor aria-hidden=true href=#python>#</a></h3><p>I&rsquo;m pretty comfortable with Python, it&rsquo;s the language that I&rsquo;ve done most of my professional coding with; however as with Go, the way I
write it is probably not as Pythonic as a serious Python developer.</p><h3 id=rust>Rust<a hidden class=anchor aria-hidden=true href=#rust>#</a></h3><p>I have written almost zero Rust and I would absolutely love to write more (I just don&rsquo;t have an excuse, or didn&rsquo;t, until now).</p><p>It looks like it has an incredibly steep learning curve but despite how low-level it is (it feels like it&rsquo;s trying to solve the same problem
as C) it can be impressively terse.</p><p>This is the language I will be trying to learn the most about in the near future.</p><p>Simply getting the template code for this project to share a socket safely (at least as far as the borrow-checker is concerned) between the
main thread and the background thread took me days; the takeaways ended up being this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#75715e>// wrap a socket in an atomic reference counter; note the cool error handling
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> socket <span style=color:#f92672>=</span> sync::Arc::new(net::UdpSocket::bind(local_addr).expect(<span style=color:#e6db74>&#34;failed to bind socket&#34;</span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// take a clone of the socket for safely &#34;moving&#34; into the thread from an ownership
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>let</span> cloned_socket <span style=color:#f92672>=</span> socket.clone();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// spawn a thread and move the cloned socket into it
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>thread::spawn( <span style=color:#66d9ef>move</span> <span style=color:#f92672>|</span> <span style=color:#f92672>|</span> receive_loop(cloned_socket, local_ip));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// meanwhile in our main thread we can comfortably do this (don&#39;t even need to unwrap the atomic reference counter)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>socket.send_to(
</span></span><span style=display:flex><span>format!(<span style=color:#e6db74>&#34;Hello world from Rust @ {}&#34;</span>, hostname).as_bytes(),
</span></span><span style=display:flex><span>format!(<span style=color:#e6db74>&#34;{}:{}&#34;</span>, broadcast_ip, PORT),
</span></span><span style=display:flex><span>).expect(<span style=color:#e6db74>&#34;failed to send to socket&#34;</span>);
</span></span></code></pre></div><p>Apparently with this we can have faith that when everyone is finished using despite rust not having a garbage collector per se- exceptional!</p><h3 id=typescript>TypeScript<a hidden class=anchor aria-hidden=true href=#typescript>#</a></h3><p>We write a bit of TypeScript at work but it&rsquo;s all on the frontend; NodeJS gets a pretty good review for server-side stuff so I figured I&rsquo;d
best include it.</p><p>Without question, it is super terse and that probably helps you get services up and running from nothing quite quickly.</p><p>I don&rsquo;t really like it- I had to hack more environment / dependency stuff in to get the TypeScript template working than I did for the other
languages; maybe it&rsquo;s okay if you&rsquo;re comfortable with it, but it feels like there&rsquo;s almost as much &ldquo;fluff&rdquo; around the edges of actually
achieving anything as Java (environment-wise).</p></div><footer class=post-footer><ul class=post-tags></ul></footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//initialed85.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></article></main><footer class=footer><span>&copy; 2023 <a href=https://initialed85.cc/>initialed85's misc tech stuff</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>